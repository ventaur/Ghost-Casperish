!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).GhostSeriesDisplay={})}(this,(function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),o=function(t){return"function"==typeof t},i=o,a=function(t){return"object"==typeof t?null!==t:i(t)},u=a,c=r.document,s=u(c)&&u(c.createElement),l=function(t){return s?c.createElement(t):{}},f=l("span").classList,p=f&&f.constructor&&f.constructor.prototype,d=p===Object.prototype?void 0:p,g=Function.prototype,v=g.bind,y=g.call,h=v&&v.bind(y),m=v?function(t){return t&&h(y,t)}:function(t){return t&&function(){return y.apply(t,arguments)}},b=function(t){try{return!!t()}catch(t){return!0}},S=m,O=S({}.toString),x=S("".slice),w=function(t){return x(O(t),8,-1)},E=m,T=b,j=w,I=r.Object,P=E("".split),A=T((function(){return!I("z").propertyIsEnumerable(0)}))?function(t){return"String"==j(t)?P(t,""):I(t)}:I,R=r.TypeError,L=function(t){if(null==t)throw R("Can't call method on "+t);return t},C=A,M=L,_=function(t){return C(M(t))},k={exports:{}},D=r,F=Object.defineProperty,N=function(t,e){try{F(D,t,{value:e,configurable:!0,writable:!0})}catch(n){D[t]=e}return e},G=N,$="__core-js_shared__",B=r[$]||G($,{}),U=B;(k.exports=function(t,e){return U[t]||(U[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.20.0",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var V,z,H=L,W=r.Object,Y=function(t){return W(H(t))},q=Y,K=m({}.hasOwnProperty),X=Object.hasOwn||function(t,e){return K(q(t),e)},J=m,Q=0,Z=Math.random(),tt=J(1..toString),et=function(t){return"Symbol("+(void 0===t?"":t)+")_"+tt(++Q+Z,36)},nt=r,rt=o,ot=function(t){return rt(t)?t:void 0},it=function(t,e){return arguments.length<2?ot(nt[t]):nt[t]&&nt[t][e]},at=r,ut=it("navigator","userAgent")||"",ct=at.process,st=at.Deno,lt=ct&&ct.versions||st&&st.version,ft=lt&&lt.v8;ft&&(z=(V=ft.split("."))[0]>0&&V[0]<4?1:+(V[0]+V[1])),!z&&ut&&(!(V=ut.match(/Edge\/(\d+)/))||V[1]>=74)&&(V=ut.match(/Chrome\/(\d+)/))&&(z=+V[1]);var pt=z,dt=b,gt=!!Object.getOwnPropertySymbols&&!dt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&pt&&pt<41})),vt=gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,yt=r,ht=k.exports,mt=X,bt=et,St=gt,Ot=vt,xt=ht("wks"),wt=yt.Symbol,Et=wt&&wt.for,Tt=Ot?wt:wt&&wt.withoutSetter||bt,jt=function(t){if(!mt(xt,t)||!St&&"string"!=typeof xt[t]){var e="Symbol."+t;St&&mt(wt,t)?xt[t]=wt[t]:xt[t]=Ot&&Et?Et(e):Tt(e)}return xt[t]},It=r,Pt=a,At=It.String,Rt=It.TypeError,Lt=function(t){if(Pt(t))return t;throw Rt(At(t)+" is not an object")},Ct=!b((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Mt={},_t=l,kt=!Ct&&!b((function(){return 7!=Object.defineProperty(_t("div"),"a",{get:function(){return 7}}).a})),Dt=Function.prototype.call,Ft=Dt.bind?Dt.bind(Dt):function(){return Dt.apply(Dt,arguments)},Nt=m({}.isPrototypeOf),Gt=it,$t=o,Bt=Nt,Ut=vt,Vt=r.Object,zt=Ut?function(t){return"symbol"==typeof t}:function(t){var e=Gt("Symbol");return $t(e)&&Bt(e.prototype,Vt(t))},Ht=r.String,Wt=o,Yt=function(t){try{return Ht(t)}catch(t){return"Object"}},qt=r.TypeError,Kt=function(t){if(Wt(t))return t;throw qt(Yt(t)+" is not a function")},Xt=function(t,e){var n=t[e];return null==n?void 0:Kt(n)},Jt=Ft,Qt=o,Zt=a,te=r.TypeError,ee=Ft,ne=a,re=zt,oe=Xt,ie=function(t,e){var n,r;if("string"===e&&Qt(n=t.toString)&&!Zt(r=Jt(n,t)))return r;if(Qt(n=t.valueOf)&&!Zt(r=Jt(n,t)))return r;if("string"!==e&&Qt(n=t.toString)&&!Zt(r=Jt(n,t)))return r;throw te("Can't convert object to primitive value")},ae=jt,ue=r.TypeError,ce=ae("toPrimitive"),se=function(t,e){if(!ne(t)||re(t))return t;var n,r=oe(t,ce);if(r){if(void 0===e&&(e="default"),n=ee(r,t,e),!ne(n)||re(n))return n;throw ue("Can't convert object to primitive value")}return void 0===e&&(e="number"),ie(t,e)},le=zt,fe=function(t){var e=se(t,"string");return le(e)?e:e+""},pe=Ct,de=kt,ge=Lt,ve=fe,ye=r.TypeError,he=Object.defineProperty;Mt.f=pe?he:function(t,e,n){if(ge(t),e=ve(e),ge(n),de)try{return he(t,e,n)}catch(t){}if("get"in n||"set"in n)throw ye("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var me,be=Math.ceil,Se=Math.floor,Oe=function(t){var e=+t;return e!=e||0===e?0:(e>0?Se:be)(e)},xe=Oe,we=Math.max,Ee=Math.min,Te=Oe,je=Math.min,Ie=function(t){return t>0?je(Te(t),9007199254740991):0},Pe=Ie,Ae=_,Re=function(t,e){var n=xe(t);return n<0?we(n+e,0):Ee(n,e)},Le=function(t){return Pe(t.length)},Ce=function(t){return function(e,n,r){var o,i=Ae(e),a=Le(i),u=Re(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},Me={includes:Ce(!0),indexOf:Ce(!1)},_e={},ke=X,De=_,Fe=Me.indexOf,Ne=_e,Ge=m([].push),$e=function(t,e){var n,r=De(t),o=0,i=[];for(n in r)!ke(Ne,n)&&ke(r,n)&&Ge(i,n);for(;e.length>o;)ke(r,n=e[o++])&&(~Fe(i,n)||Ge(i,n));return i},Be=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ue=$e,Ve=Be,ze=Object.keys||function(t){return Ue(t,Ve)},He=Mt,We=Lt,Ye=_,qe=ze,Ke=Ct?Object.defineProperties:function(t,e){We(t);for(var n,r=Ye(e),o=qe(e),i=o.length,a=0;i>a;)He.f(t,n=o[a++],r[n]);return t},Xe=it("document","documentElement"),Je=k.exports,Qe=et,Ze=Je("keys"),tn=function(t){return Ze[t]||(Ze[t]=Qe(t))},en=Lt,nn=Ke,rn=Be,on=_e,an=Xe,un=l,cn=tn("IE_PROTO"),sn=function(){},ln=function(t){return"<script>"+t+"</"+"script>"},fn=function(t){t.write(ln("")),t.close();var e=t.parentWindow.Object;return t=null,e},pn=function(){try{me=new ActiveXObject("htmlfile")}catch(t){}var t,e;pn="undefined"!=typeof document?document.domain&&me?fn(me):((e=un("iframe")).style.display="none",an.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ln("document.F=Object")),t.close(),t.F):fn(me);for(var n=rn.length;n--;)delete pn.prototype[rn[n]];return pn()};on[cn]=!0;var dn=Object.create||function(t,e){var n;return null!==t?(sn.prototype=en(t),n=new sn,sn.prototype=null,n[cn]=t):n=pn(),void 0===e?n:nn(n,e)},gn=dn,vn=Mt,yn=jt("unscopables"),hn=Array.prototype;null==hn[yn]&&vn.f(hn,yn,{configurable:!0,value:gn(null)});var mn=function(t){hn[yn][t]=!0},bn={},Sn=o,On=B,xn=m(Function.toString);Sn(On.inspectSource)||(On.inspectSource=function(t){return xn(t)});var wn,En,Tn,jn=On.inspectSource,In=o,Pn=jn,An=r.WeakMap,Rn=In(An)&&/native code/.test(Pn(An)),Ln=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Cn=Mt,Mn=Ln,_n=Ct?function(t,e,n){return Cn.f(t,e,Mn(1,n))}:function(t,e,n){return t[e]=n,t},kn=Rn,Dn=r,Fn=m,Nn=a,Gn=_n,$n=X,Bn=B,Un=tn,Vn=_e,zn="Object already initialized",Hn=Dn.TypeError,Wn=Dn.WeakMap;if(kn||Bn.state){var Yn=Bn.state||(Bn.state=new Wn),qn=Fn(Yn.get),Kn=Fn(Yn.has),Xn=Fn(Yn.set);wn=function(t,e){if(Kn(Yn,t))throw new Hn(zn);return e.facade=t,Xn(Yn,t,e),e},En=function(t){return qn(Yn,t)||{}},Tn=function(t){return Kn(Yn,t)}}else{var Jn=Un("state");Vn[Jn]=!0,wn=function(t,e){if($n(t,Jn))throw new Hn(zn);return e.facade=t,Gn(t,Jn,e),e},En=function(t){return $n(t,Jn)?t[Jn]:{}},Tn=function(t){return $n(t,Jn)}}var Qn={set:wn,get:En,has:Tn,enforce:function(t){return Tn(t)?En(t):wn(t,{})},getterFor:function(t){return function(e){var n;if(!Nn(e)||(n=En(e)).type!==t)throw Hn("Incompatible receiver, "+t+" required");return n}}},Zn={},tr={},er={}.propertyIsEnumerable,nr=Object.getOwnPropertyDescriptor,rr=nr&&!er.call({1:2},1);tr.f=rr?function(t){var e=nr(this,t);return!!e&&e.enumerable}:er;var or=Ct,ir=Ft,ar=tr,ur=Ln,cr=_,sr=fe,lr=X,fr=kt,pr=Object.getOwnPropertyDescriptor;Zn.f=or?pr:function(t,e){if(t=cr(t),e=sr(e),fr)try{return pr(t,e)}catch(t){}if(lr(t,e))return ur(!ir(ar.f,t,e),t[e])};var dr={exports:{}},gr=Ct,vr=X,yr=Function.prototype,hr=gr&&Object.getOwnPropertyDescriptor,mr=vr(yr,"name"),br={EXISTS:mr,PROPER:mr&&"something"===function(){}.name,CONFIGURABLE:mr&&(!gr||gr&&hr(yr,"name").configurable)},Sr=r,Or=o,xr=X,wr=_n,Er=N,Tr=jn,jr=br.CONFIGURABLE,Ir=Qn.get,Pr=Qn.enforce,Ar=String(String).split("String");(dr.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,u=!!r&&!!r.noTargetGet,c=r&&void 0!==r.name?r.name:e;Or(n)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!xr(n,"name")||jr&&n.name!==c)&&wr(n,"name",c),(o=Pr(n)).source||(o.source=Ar.join("string"==typeof c?c:""))),t!==Sr?(i?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=n:wr(t,e,n)):a?t[e]=n:Er(e,n)})(Function.prototype,"toString",(function(){return Or(this)&&Ir(this).source||Tr(this)}));var Rr={},Lr=$e,Cr=Be.concat("length","prototype");Rr.f=Object.getOwnPropertyNames||function(t){return Lr(t,Cr)};var Mr={};Mr.f=Object.getOwnPropertySymbols;var _r,kr,Dr,Fr=it,Nr=Rr,Gr=Mr,$r=Lt,Br=m([].concat),Ur=Fr("Reflect","ownKeys")||function(t){var e=Nr.f($r(t)),n=Gr.f;return n?Br(e,n(t)):e},Vr=X,zr=Ur,Hr=Zn,Wr=Mt,Yr=b,qr=o,Kr=/#|\.prototype\./,Xr=function(t,e){var n=Qr[Jr(t)];return n==to||n!=Zr&&(qr(e)?Yr(e):!!e)},Jr=Xr.normalize=function(t){return String(t).replace(Kr,".").toLowerCase()},Qr=Xr.data={},Zr=Xr.NATIVE="N",to=Xr.POLYFILL="P",eo=Xr,no=r,ro=Zn.f,oo=_n,io=dr.exports,ao=N,uo=function(t,e,n){for(var r=zr(e),o=Wr.f,i=Hr.f,a=0;a<r.length;a++){var u=r[a];Vr(t,u)||n&&Vr(n,u)||o(t,u,i(e,u))}},co=eo,so=function(t,e){var n,r,o,i,a,u=t.target,c=t.global,s=t.stat;if(n=c?no:s?no[u]||ao(u,{}):(no[u]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=ro(n,r))&&a.value:n[r],!co(c?r:u+(s?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;uo(i,o)}(t.sham||o&&o.sham)&&oo(i,"sham",!0),io(n,r,i,t)}},lo=!b((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),fo=r,po=X,go=o,vo=Y,yo=lo,ho=tn("IE_PROTO"),mo=fo.Object,bo=mo.prototype,So=yo?mo.getPrototypeOf:function(t){var e=vo(t);if(po(e,ho))return e[ho];var n=e.constructor;return go(n)&&e instanceof n?n.prototype:e instanceof mo?bo:null},Oo=b,xo=o,wo=So,Eo=dr.exports,To=jt("iterator"),jo=!1;[].keys&&("next"in(Dr=[].keys())?(kr=wo(wo(Dr)))!==Object.prototype&&(_r=kr):jo=!0);var Io=null==_r||Oo((function(){var t={};return _r[To].call(t)!==t}));Io&&(_r={}),xo(_r[To])||Eo(_r,To,(function(){return this}));var Po={IteratorPrototype:_r,BUGGY_SAFARI_ITERATORS:jo},Ao=Mt.f,Ro=X,Lo=jt("toStringTag"),Co=function(t,e,n){t&&!n&&(t=t.prototype),t&&!Ro(t,Lo)&&Ao(t,Lo,{configurable:!0,value:e})},Mo=Po.IteratorPrototype,_o=dn,ko=Ln,Do=Co,Fo=bn,No=function(){return this},Go=r,$o=o,Bo=Go.String,Uo=Go.TypeError,Vo=m,zo=Lt,Ho=function(t){if("object"==typeof t||$o(t))return t;throw Uo("Can't set "+Bo(t)+" as a prototype")},Wo=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Vo(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return zo(n),Ho(r),e?t(n,r):n.__proto__=r,n}}():void 0),Yo=so,qo=Ft,Ko=br,Xo=o,Jo=function(t,e,n,r){var o=e+" Iterator";return t.prototype=_o(Mo,{next:ko(+!r,n)}),Do(t,o,!1),Fo[o]=No,t},Qo=So,Zo=Wo,ti=Co,ei=_n,ni=dr.exports,ri=bn,oi=Ko.PROPER,ii=Ko.CONFIGURABLE,ai=Po.IteratorPrototype,ui=Po.BUGGY_SAFARI_ITERATORS,ci=jt("iterator"),si="keys",li="values",fi="entries",pi=function(){return this},di=_,gi=mn,vi=bn,yi=Qn,hi=Mt.f,mi=function(t,e,n,r,o,i,a){Jo(n,e,r);var u,c,s,l=function(t){if(t===o&&v)return v;if(!ui&&t in d)return d[t];switch(t){case si:case li:case fi:return function(){return new n(this,t)}}return function(){return new n(this)}},f=e+" Iterator",p=!1,d=t.prototype,g=d[ci]||d["@@iterator"]||o&&d[o],v=!ui&&g||l(o),y="Array"==e&&d.entries||g;if(y&&(u=Qo(y.call(new t)))!==Object.prototype&&u.next&&(Qo(u)!==ai&&(Zo?Zo(u,ai):Xo(u[ci])||ni(u,ci,pi)),ti(u,f,!0)),oi&&o==li&&g&&g.name!==li&&(ii?ei(d,"name",li):(p=!0,v=function(){return qo(g,this)})),o)if(c={values:l(li),keys:i?v:l(si),entries:l(fi)},a)for(s in c)(ui||p||!(s in d))&&ni(d,s,c[s]);else Yo({target:e,proto:!0,forced:ui||p},c);return d[ci]!==v&&ni(d,ci,v,{name:o}),ri[e]=v,c},bi=Ct,Si="Array Iterator",Oi=yi.set,xi=yi.getterFor(Si),wi=mi(Array,"Array",(function(t,e){Oi(this,{type:Si,target:di(t),index:0,kind:e})}),(function(){var t=xi(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),Ei=vi.Arguments=vi.Array;if(gi("keys"),gi("values"),gi("entries"),bi&&"values"!==Ei.name)try{hi(Ei,"name",{value:"values"})}catch(t){}var Ti=r,ji={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ii=d,Pi=wi,Ai=_n,Ri=jt,Li=Ri("iterator"),Ci=Ri("toStringTag"),Mi=Pi.values,_i=function(t,e){if(t){if(t[Li]!==Mi)try{Ai(t,Li,Mi)}catch(e){t[Li]=Mi}if(t[Ci]||Ai(t,Ci,e),ji[e])for(var n in Pi)if(t[n]!==Pi[n])try{Ai(t,n,Pi[n])}catch(e){t[n]=Pi[n]}}};for(var ki in ji)_i(Ti[ki]&&Ti[ki].prototype,ki);_i(Ii,"DOMTokenList");var Di=Function.prototype,Fi=Di.apply,Ni=Di.bind,Gi=Di.call,$i="object"==typeof Reflect&&Reflect.apply||(Ni?Gi.bind(Fi):function(){return Gi.apply(Fi,arguments)}),Bi={};Bi[jt("toStringTag")]="z";var Ui,Vi,zi=r,Hi="[object z]"===String(Bi),Wi=o,Yi=w,qi=jt("toStringTag"),Ki=zi.Object,Xi="Arguments"==Yi(function(){return arguments}()),Ji=Hi?Yi:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Ki(t),qi))?n:Xi?Yi(e):"Object"==(r=Yi(e))&&Wi(e.callee)?"Arguments":r},Qi=r.String,Zi=function(t){if("Symbol"===Ji(t))throw TypeError("Cannot convert a Symbol value to a string");return Qi(t)},ta=Lt,ea=b,na=r.RegExp,ra=ea((function(){var t=na("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),oa=ra||ea((function(){return!na("a","y").sticky})),ia={BROKEN_CARET:ra||ea((function(){var t=na("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:oa,UNSUPPORTED_Y:ra},aa=b,ua=r.RegExp,ca=aa((function(){var t=ua(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),sa=b,la=r.RegExp,fa=sa((function(){var t=la("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),pa=Ft,da=m,ga=Zi,va=function(){var t=ta(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},ya=ia,ha=k.exports,ma=dn,ba=Qn.get,Sa=ca,Oa=fa,xa=ha("native-string-replace",String.prototype.replace),wa=RegExp.prototype.exec,Ea=wa,Ta=da("".charAt),ja=da("".indexOf),Ia=da("".replace),Pa=da("".slice),Aa=(Vi=/b*/g,pa(wa,Ui=/a/,"a"),pa(wa,Vi,"a"),0!==Ui.lastIndex||0!==Vi.lastIndex),Ra=ya.BROKEN_CARET,La=void 0!==/()??/.exec("")[1];(Aa||La||Ra||Sa||Oa)&&(Ea=function(t){var e,n,r,o,i,a,u,c=this,s=ba(c),l=ga(t),f=s.raw;if(f)return f.lastIndex=c.lastIndex,e=pa(Ea,f,l),c.lastIndex=f.lastIndex,e;var p=s.groups,d=Ra&&c.sticky,g=pa(va,c),v=c.source,y=0,h=l;if(d&&(g=Ia(g,"y",""),-1===ja(g,"g")&&(g+="g"),h=Pa(l,c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==Ta(l,c.lastIndex-1))&&(v="(?: "+v+")",h=" "+h,y++),n=new RegExp("^(?:"+v+")",g)),La&&(n=new RegExp("^"+v+"$(?!\\s)",g)),Aa&&(r=c.lastIndex),o=pa(wa,d?n:c,h),d?o?(o.input=Pa(o.input,y),o[0]=Pa(o[0],y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:Aa&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),La&&o&&o.length>1&&pa(xa,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&p)for(o.groups=a=ma(null),i=0;i<p.length;i++)a[(u=p[i])[0]]=o[u[1]];return o});var Ca=Ea;so({target:"RegExp",proto:!0,forced:/./.exec!==Ca},{exec:Ca});var Ma=m,_a=dr.exports,ka=Ca,Da=b,Fa=jt,Na=_n,Ga=Fa("species"),$a=RegExp.prototype,Ba=m,Ua=Oe,Va=Zi,za=L,Ha=Ba("".charAt),Wa=Ba("".charCodeAt),Ya=Ba("".slice),qa=function(t){return function(e,n){var r,o,i=Va(za(e)),a=Ua(n),u=i.length;return a<0||a>=u?t?"":void 0:(r=Wa(i,a))<55296||r>56319||a+1===u||(o=Wa(i,a+1))<56320||o>57343?t?Ha(i,a):r:t?Ya(i,a,a+2):o-56320+(r-55296<<10)+65536}},Ka={codeAt:qa(!1),charAt:qa(!0)}.charAt,Xa=m,Ja=Y,Qa=Math.floor,Za=Xa("".charAt),tu=Xa("".replace),eu=Xa("".slice),nu=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,ru=/\$([$&'`]|\d{1,2})/g,ou=Ft,iu=Lt,au=o,uu=w,cu=Ca,su=r.TypeError,lu=$i,fu=Ft,pu=m,du=function(t,e,n,r){var o=Fa(t),i=!Da((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!Da((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ga]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var u=Ma(/./[o]),c=e(o,""[t],(function(t,e,n,r,o){var a=Ma(t),c=e.exec;return c===ka||c===$a.exec?i&&!o?{done:!0,value:u(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));_a(String.prototype,t,c[0]),_a($a,o,c[1])}r&&Na($a[o],"sham",!0)},gu=b,vu=Lt,yu=o,hu=Oe,mu=Ie,bu=Zi,Su=L,Ou=function(t,e,n){return e+(n?Ka(t,e).length:1)},xu=Xt,wu=function(t,e,n,r,o,i){var a=n+t.length,u=r.length,c=ru;return void 0!==o&&(o=Ja(o),c=nu),tu(i,c,(function(i,c){var s;switch(Za(c,0)){case"$":return"$";case"&":return t;case"`":return eu(e,0,n);case"'":return eu(e,a);case"<":s=o[eu(c,1,-1)];break;default:var l=+c;if(0===l)return i;if(l>u){var f=Qa(l/10);return 0===f?i:f<=u?void 0===r[f-1]?Za(c,1):r[f-1]+Za(c,1):i}s=r[l-1]}return void 0===s?"":s}))},Eu=function(t,e){var n=t.exec;if(au(n)){var r=ou(n,t,e);return null!==r&&iu(r),r}if("RegExp"===uu(t))return ou(cu,t,e);throw su("RegExp#exec called on incompatible receiver")},Tu=jt("replace"),ju=Math.max,Iu=Math.min,Pu=pu([].concat),Au=pu([].push),Ru=pu("".indexOf),Lu=pu("".slice),Cu="$0"==="a".replace(/./,"$0"),Mu=!!/./[Tu]&&""===/./[Tu]("a","$0");function _u(t,e){if(t<0)return[];const n=Array(t);for(let t=0;t<n.length;t++)n[t]=e(t);return n}du("replace",(function(t,e,n){var r=Mu?"$":"$0";return[function(t,n){var r=Su(this),o=null==t?void 0:xu(t,Tu);return o?fu(o,t,r,n):fu(e,bu(r),t,n)},function(t,o){var i=vu(this),a=bu(t);if("string"==typeof o&&-1===Ru(o,r)&&-1===Ru(o,"$<")){var u=n(e,i,a,o);if(u.done)return u.value}var c=yu(o);c||(o=bu(o));var s=i.global;if(s){var l=i.unicode;i.lastIndex=0}for(var f=[];;){var p=Eu(i,a);if(null===p)break;if(Au(f,p),!s)break;""===bu(p[0])&&(i.lastIndex=Ou(a,mu(i.lastIndex),l))}for(var d,g="",v=0,y=0;y<f.length;y++){for(var h=bu((p=f[y])[0]),m=ju(Iu(hu(p.index),a.length),0),b=[],S=1;S<p.length;S++)Au(b,void 0===(d=p[S])?d:String(d));var O=p.groups;if(c){var x=Pu([h],b,m,a);void 0!==O&&Au(x,O);var w=bu(lu(o,void 0,x))}else w=wu(h,a,m,b,O,o);m>=v&&(g+=Lu(a,v,m)+w,v=m+h.length)}return g+Lu(a,v)}]}),!!gu((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Cu||Mu),mn("flat");const ku={BEFORE:"before",AFTER:"after",BEGIN:"begin",END:"end"};t.ElementInsertionPosition=ku,t.SeriesDisplay=function(t){const e="tag-",n="series-",r={hideSinglePostSeries:!1,comingSoonText:"Coming soon…"},o={insertions:[{selector:"main .post .gh-content",position:ku.END}]},i=new Map;function a(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;const o=t.body.className.split(" ");return o.filter((t=>t.startsWith(e+r))).map((t=>t.replace(e,"")))}function u(t,e){return function(t,e){const n=new Map;for(const o of t){const t=[].concat(e(o));for(const e of t){var r;const t=null!==(r=n.get(e))&&void 0!==r?r:[];n.set(e,[...t,o])}}return n}(t,(t=>e.filter((e=>t.tags.some((t=>t.slug===e.slug))))))}function c(t,e,n){switch(n){case ku.BEFORE:e.before(t);break;case ku.AFTER:e.after(t);break;case ku.BEGIN:e.prepend(t);break;case ku.END:e.append(t);break;default:throw new RangeError("insertionPosition must be one of ElementInsertionPosition.")}}function s(t,e){var n;const r=null!==(n=t.seriesTagSlugs)&&void 0!==n?n:e();return t.seriesTagSlugs=[].concat(r),t}function l(t){if(null==t)throw new TypeError("document must be provided.");if("undefined"==typeof Document)return;if(void 0!==Document&&!((e=t)instanceof Document||e instanceof HTMLDocument))throw new TypeError("document must be an instance of Document (or HTMLDocument).");var e}async function f(e,n){var o,c;l(e);const f={currentPostUrl:(null===(o=e.location)||void 0===o?void 0:o.origin)+(null===(c=e.location)||void 0===c?void 0:c.pathname)};n=Object.assign({},r,f,n);const{currentPostUrl:p,hideSinglePostSeries:d,comingSoonText:g,seriesTagSlugs:v}=s(n,(()=>a(e))),y=await async function(e){if(!e||0===e.length)return[];const n=e.map((t=>"tag:"+t)).join(",");if(i.has(n))return i.get(n);try{const e=await t.posts.browse({filter:n,fields:"id,title,slug,url",include:"tags",order:"published_at asc"});return i.set(n,e),e}catch(t){throw new Error("An error occurred while calling the posts.browse endpoint of the GhostContentAPI.\n"+t)}}(v);if(!y||!y.length)return null;const h=function(t,e){const n=t.map((t=>t.tags)).flat();return e.map((t=>n.find((e=>e.slug===t)))).filter((t=>void 0!==t))}(y,v),m=u(y,h),b=e.createDocumentFragment(),S=e.createElement("section");S.className="series-info",b.appendChild(S);for(const[t,n]of m){if(!0===d&&1===n.length)continue;const r=e.createElement("aside");S.appendChild(r);const o=e.createElement("h2");o.textContent="Other Posts in ".concat(t.name),r.appendChild(o);const i=e.createElement("ol");for(const t of n){const n=e.createElement("li");if(t.url===p)n.textContent=t.title;else{const r=e.createElement("a");r.textContent=t.title,r.href=t.url,n.appendChild(r)}i.appendChild(n)}if(1===n.length){const t=e.createElement("li");t.textContent=g,i.appendChild(t)}r.appendChild(i)}return b}return{buildSeriesInfoFragment:f,displaySeriesInfo:async function(t,e){l(t),e=Object.assign({},o,e);const{insertions:n}=s(e,(()=>a(t)));!function(t){if(null==t.insertions||!Array.isArray(t.insertions))throw new TypeError("option.insertions is required and must be an array.")}(e);const r=await f(t,e);if(!r)return;const i=()=>function(t,e,n){let r=[e];const o=[];for(const i of n){const n=t.querySelectorAll(i.selector),a=n.length-r.length;r=[...r,..._u(a,(()=>e.cloneNode(!0)))];for(const t of n){const e=r.pop();o.push((()=>c(e,t,i.position)))}}o.forEach((t=>t()))}(t,r,n);"loading"!==t.readyState?i():t.addEventListener("DOMContentLoaded",i)}}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ghost-series-display.min.js.map
